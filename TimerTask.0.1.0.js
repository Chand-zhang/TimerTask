/**
 * 
 */
function UUID(){var a,b;0==arguments.length?(a=10,b=36):1==arguments.length?(a=arguments[0],b=36):2<=arguments.length&&(a=arguments[0],b=arguments[1]);var d="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=[],c;b=b||d.length;if(0<a)for(c=0;c<a;c++)e[c]=d[0|Math.random()*b];else for(e[8]=e[13]=e[18]=e[23]="-",e[14]="4",c=0;36>c;c++)e[c]||(a=0|16*Math.random(),e[c]=d[19==c?a&3|8:a]);return e.join("")}function len(a){if(null==a)return-1;if(a instanceof Array||"string"==typeof a)return a.length;if(a instanceof Object){var b=0,d;for(d in a)b++;return b}return 0}var TimerTask=function(){var a=0,b={},d=new Timer(100),e=function(){a=Math.round(10*(a+.1))/10;if(b[a]){for(var c=0;c<b[a].length;c++)b[a][c].task.apply(null,b[a][c].args),b[a][c].release();b[a]=null;delete b[a];0==len(b)&&this.stop();120<=a&&2>a%120&&0==len(b)&&this.stop()}};e.owner=this;d.setListener(e);this.release=function(){a=0;for(var c in b)b[c]=null,delete b[c];b=null;d&&(d.release(),d=null)};this.start=function(){d&&d.start()};this.stop=function(){d&&d.stop();a=0};this.setTask=function(c,e,h){for(var f=[],g=2;g<arguments.length;++g)f[g-2]=arguments[g];if(e)if(c=Math.round(10*(a+c))/10,c<=a)e.apply(null,f);else return f=new Task(c,e,f),b[c]||(b[c]=[]),b[c].push(f),d&&!d.isRunning&&this.start(),f.id};this.removeTask=function(a){if(a){for(var c in b){var d=b[c];if(null==d||0>=d.length)delete b[c];else for(var e=0;e<d.length;e++)if(a==d[e].id){d.splice(e,1);0>=d.length&&delete b[c];break}}0==len(b)&&this.stop()}};this.getTask=function(a){return 0>=arguments.length?b:b[a]}},Task=function(a,b,d){this.id=UUID();this.when=-1;this.args=this.task=null;this.when=a;this.task=b;this.args=d;this.release=function(){id=null;when=-1;args=task=null}},Timer=function(a){var b=-1,d=a,e=null;this.isRunning=!1;this.release=function(){this.stop();b=-1;d=0;e=null};this.setListener=function(a){if("function"!=typeof a)throw"Not a valid listener!";e=a};this.start=function(){this.isRunning||(b=setInterval(function(){e.apply(e.owner)},d),this.isRunning=!0)};this.stop=function(){clearInterval(b);this.isRunning=!1};this.reset=function(){this.stop();this.start()}};